<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Cliente Reordenado - Bootstrap</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    </head>
<body>
<script>
    // Colocamos una foto del cliente 
     
    </script>
<main class= "container my-5">
    <div class="container border p-4 shadow-lg rounded">
        <div class="row mb-4 align-items-center">
            <div class="col-sm-9">
                <h2 class="text-primary mb-0">Datos del Cliente</h2>
            </div>
            <div class="col-sm-3 text-end">
                <div id="foto-cliente-container" style="width: 100px; height: 100px; border: 2px solid #007bff; border-radius: 50%; overflow: hidden; display: inline-block;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="#adb5bd" class="bi bi-person-circle" viewBox="0 0 16 16">
                        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                        <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
                    </svg>
                    </div>
            </div>
        </div>
       
        <form>
            <div class="row mb-3">
                <div class="col-12">
                    <label class="form-label d-block">Tipo de ID (*)</label>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="tipoID" id="radioCI" value="CI" checked>
                        <label class="form-check-label" for="radioCI">C.I.</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="tipoID" id="radioRUC" value="RUC">
                        <label class="form-check-label" for="radioRUC">RUC</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="tipoID" id="radioPasaporte" value="Pasaporte">
                        <label class="form-check-label" for="radioPasaporte">Pasaporte</label>
                    </div>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-12">
                    <label for="id_numero" class="form-label">ID / Número (*)</label>
                    <input type="text" 
                           class="form-control" 
                           id="id_numero" 
                           placeholder="Número de identificación (máx. 13 dígitos)" 
                           required 
                           maxlength="13" 
                           oninput="validarLongitud(this)">
                    <div class="invalid-feedback" id="mensajeID">
                        El número de identificación debe tener maximo 13 dígitos.
                    </div>
                </div>
            </div>
    
            <div class="row mb-3">
                <div class="col-12">
                    <label for="nombres" class="form-label">Nombres (*)</label>
                    <input type="text" class="form-control" id="nombres" placeholder="Ingresa los nombres" required>
                </div>
            </div>
    
            <div class="row mb-3">
                <div class="col-12">
                    <label for="apellidos" class="form-label">Apellidos (*)</label>
                    <input type="text" class="form-control" id="apellidos" placeholder="Ingresa los apellidos" required>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="pais" class="form-label">País</label>
                    <select class="form-select" id="pais" required>
                        <option value="" disabled selected>Seleccione un país</option>
                        <option value="EC">Ecuador</option>
                        <option value="CO">Argentina</option>
                        <option value="PE">Brasil</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="provincia" class="form-label">Provincia</label>
                    <select class="form-select" id="provincia">
                        <option value="" disabled selected>Seleccione una provincia</option>
                        <option value="PICHINCHA">Pichincha</option>
                        <option value="GUAYAS">Guayas</option>
                        <option value="AZUAY">Azuay</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="ciudad" class="form-label">Ciudad</label>
                    <select class="form-select" id="ciudad">
                        <option value="" disabled selected>Seleccione una ciudad</option>
                        <option value="QUITO">Quito</option>
                        <option value="GUAYAQUIL">Guayaquil</option>
                        <option value="CUENCA">Cuenca</option>
                    </select>
                </div>
            </div>
    
            <div class="row mb-3">
                <div class="col-12">
                    <label for="direccion" class="form-label">Dirección</label>
                    <input type="text" class="form-control" id="direccion" placeholder="Calle principal y Secundaria">
                </div>
            </div>
    
            <div class="row mb-4">
                <div class="col-md-4">
                    <label for="telefono" class="form-label">Número de Teléfono</label>
                    <input type="tel" class="form-control" id="telefono" placeholder="022222222">
                </div>
                <div class="col-md-4">
                    <label for="celular" class="form-label">Celular</label>
                    <input type="tel" class="form-control" id="celular" placeholder="0999999999">
                </div>
                <div class="col-md-4">
                    <label for="email" class="form-label">Email (*)</label>
                    <input type="email" class="form-control" id="email" placeholder="escribe aquí" required>
                </div>
            </div>
    
            <hr>
        
            <div class="row">
                <div class="col-12 d-flex justify-content-between flex-wrap">
                    <button type="button" class="btn btn-primary btn-lg me-2 mb-2 px-4 py-2"
                            onclick="marcarBotonActivo(this)"> Nuevo
                    </button>
                    <button type="button" class="btn btn-primary btn-lg me-2 mb-2 px-4 py-2"
                            onclick="marcarBotonActivo(this)"> Buscar
                    </button>
                    <button type="button" class="btn btn-primary btn-lg me-2 mb-2 px-4 py-2"
                            onclick="marcarBotonActivo(this)"> Editar
                    </button>
                    <button type="submit" class="btn btn-success btn-lg me-2 mb-2 px-4 py-2"
                            onclick="marcarBotonActivo(this)"> Registrar
                    </button>
                    <button type="button" class="btn btn-danger btn-lg mb-2 px-4 py-2"
                            onclick="marcarBotonActivo(this)"> Cancelar
                    </button>
                </div>
            </div>
        </form>
    </div>
</main>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script>
        // funcion para marcar el boton activo
        function marcarBotonActivo(botonPresionado) {
            const contenedor = botonPresionado.parentElement;
            const todosLosBotones = contenedor.querySelectorAll('.btn');
            
            // Quita 'active' de todos
            todosLosBotones.forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Añade 'active' al presionado
            botonPresionado.classList.add('active');
        }
    
        // Funcion para validar la longitud de identificacion 
        function obtenerTipoYLongitud() {
            const tipo = readioSeleccionado = document.querySelector ('input[name="tipoID"]:checked');
            const tipo = radioSeleccionado ? radioSeleccionado.value :'CI' ;
            let maxLongitud, mensaje; 
            switch (tipo) {
                case 'CI':
                    maxLongitud = 10;
                    mensaje = 'debe tener exactamente 10 dígitos (Cédula).';
                    break;
                case 'RUC':
                    maxLongitud = 13;
                    mensaje = 'debe tener exactamente 13 dígitos (Ruc).';
                    break;
                case 'Pasaporte':
                    maxLongitud = 99;
                    mensaje = 'puede tener cualquier longitud (Pasaporte).';
                    break;
                default:
                    maxLongitud = 10;
                    mensaje = 'debe tener 10 dígitos.';
            }
            return {tipo: tipo, max: maxLongitud, msg: mensaje};
        }
        
        function actualizarValidacion() {
            const inputID = document.getElementById('id_numero');
            const { tipo, max } = obtenerTipoYLongitud();

            if (tipo === 'Pasaporte') {
                inputID.removeAttribute('maxlength');
                inputID.placeholder = 'Número de Pasaporte (Cualquier longitud)';
            } else {
                inputID.setAttribute('maxlength', max); 
                inputID.placeholder = `Número de ${tipo} (Máx. ${max} dígitos)`;
        }
        //====== Inicialización al cargar la página
        document.addEventListener('DOMContentLoaded', actualizarValidacion);
    
        // funcion para botones activos
        function marcarBotonActivo(botonPresionado) {
            const contenedor = botonPresionado.parentElement;
            const todosLosBotones = contenedor.querySelectorAll('.btn');
            
            todosLosBotones.forEach(btn => {
                btn.classList.remove('active');
            });
            
            botonPresionado.classList.add('active');
        }
    
        // simulacion de registrar y guardar
        function guardarDatosCliente() {
            // Validación de prueba: si el ID no es válido, no guarda
            const inputID = document.getElementById('id_numero');
            validarLongitud(inputID);
            if (inputID.classList.contains('is-invalid')) {
                alert('No se puede registrar. Corrija el ID antes de continuar.');
                return;
            }
    
            const datos = {
                tipoID: document.querySelector('input[name="tipoID"]:checked').value,
                id_numero: inputID.value,
                nombres: document.getElementById('nombres').value,
                apellidos: document.getElementById('apellidos').value,
                email: document.getElementById('email').value
                // Datos guardados
            };
    
            console.log('Datos listos para enviar al servidor:', datos);
            alert('¡Registro simulado! (Se asume que el backend guardaría esta información)');
        }
    
        // simulacion de busqueda
        function buscarDatosCliente() {
            const idBusqueda = document.getElementById('id_numero').value;
    
            if (idBusqueda.length === 0) {
                alert('Por favor, ingrese un ID en el campo superior para buscar.');
                return;
            }
            
            // prueba
            if (idBusqueda === '1716788276') {
                const datosEncontrados = {
                    nombres: 'Andrea',
                    apellidos: 'López Pérez',
                    pais: 'EC',
                    provincia: 'PICHINCHA',
                    ciudad: 'QUITO',
                    direccion: 'Av. Gran Colombia, N20',
                    telefono: '22-555-444',
                    celular: '098-765-4321',
                    email: 'andrea.lopez@ejemplo.com',
                };
    
                // Rellenar el formulario
                document.getElementById('nombres').value = datosEncontrados.nombres;
                document.getElementById('apellidos').value = datosEncontrados.apellidos;
                document.getElementById('email').value = datosEncontrados.email;
                document.getElementById('pais').value = datosEncontrados.pais;
                document.getElementById('provincia').value = datosEncontrados.provincia;
                document.getElementById('ciudad').value = datosEncontrados.ciudad;
                document.getElementById('direccion').value = datosEncontrados.direccion;
                document.getElementById('telefono').value = datosEncontrados.telefono;
                document.getElementById('celular').value = datosEncontrados.celular;
                
                // Forzar estado de validación OK para el ID buscado
                document.getElementById('id_numero').classList.add('is-valid');
                document.getElementById('id_numero').classList.remove('is-invalid');
                document.getElementById('mensajeID').textContent = 'Validación OK: Datos cargados.';
                
                alert(`Cliente Andrea López encontrado y datos cargados.`);
                
            } else {
                alert('Cliente no encontrado. Intente con el ID "1712345678" para ver la simulación de carga de datos.');
            }
        }
        
        // limpiar formulario
        function limpiarFormulario() {
            document.querySelector('form').reset(); 
            document.getElementById('id_numero').classList.remove('is-valid', 'is-invalid');
            actualizarValidacion(); 
        }
    </script>
    </body>
    </html>
